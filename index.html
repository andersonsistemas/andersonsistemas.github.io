<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de Taxas - Cartão</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
        }

        .card {
            max-width: 520px;
            margin: auto;
            border-top: 6px solid #BAFF1A;
        }

        .btn-calc {
            border: none;
        }

        .resultado span {
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div class="card shadow" id="card">
        <div class="card-body">

            <h4 class="text-center mb-4" id="titulo">
                Calculadora de Taxas – InfinitiPay
            </h4>

            <!-- Empresa -->
            <div class="mb-3">
                <label class="form-label">Empresa</label>
                <select id="empresa" class="form-select" onchange="mudarEmpresa()">
                    <option value="infiniti">InfinitiPay</option>
                    <option value="nubank">Nubank</option>
                </select>
            </div>

            <!-- Bandeira (só InfinitiPay) -->
            <div class="mb-3" id="bandeiras">
                <label class="form-label">Bandeira</label>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="bandeira" value="visa" checked>
                    <label class="form-check-label">Visa / Mastercard</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="bandeira" value="amex">
                    <label class="form-check-label">AMEX / ELO</label>
                </div>
            </div>

            <!-- Valor -->
            <div class="mb-3">
                <label class="form-label">Valor da venda (R$)</label>
                <input type="number" id="valor" class="form-control" placeholder="Ex: 1000">
            </div>

            <!-- Parcelas -->
            <div class="mb-3">
                <label class="form-label">Parcelas</label>
                <select id="parcelas" class="form-select">
                    <option value="1">1x</option>
                    <option value="2">2x</option>
                    <option value="3">3x</option>
                    <option value="4">4x</option>
                    <option value="5">5x</option>
                    <option value="6">6x</option>
                    <option value="7">7x</option>
                    <option value="8">8x</option>
                    <option value="9">9x</option>
                    <option value="10">10x</option>
                    <option value="11">11x</option>
                    <option value="12">12x</option>
                </select>
            </div>

            <button class="btn btn-calc w-100" id="botao" onclick="calcular()">
                Calcular
            </button>

            <!-- Resultado -->
            <div class="resultado mt-4">
                <p>Total com juros: <span id="total">R$ 0,00</span></p>
                <p>Valor da parcela: <span id="parcela">R$ 0,00</span></p>
            </div>

        </div>
    </div>
</div>

<script>
/* ================= TAXAS ================= */

// Nubank (já em decimal)
const taxasNubank = {
    1: 0.04384, 2: 0.06485, 3: 0.07538, 4: 0.08589,
    5: 0.09649, 6: 0.10705, 7: 0.14403, 8: 0.15500,
    9: 0.16618, 10: 0.17730, 11: 0.18864, 12: 0.19804
};

// InfinitiPay
const taxasInfiniti = {
    visa: {
        1: 0.0315, 2: 0.0539, 3: 0.0612, 4: 0.0685,
        5: 0.0757, 6: 0.0828, 7: 0.0899, 8: 0.0969,
        9: 0.1038, 10: 0.1106, 11: 0.1174, 12: 0.1240
    },
    amex: {
        1: 0.0491, 2: 0.0647, 3: 0.0720, 4: 0.0792,
        5: 0.0863, 6: 0.0933, 7: 0.1003, 8: 0.1072,
        9: 0.1141, 10: 0.1208, 11: 0.1275, 12: 0.1341
    }
};

/* ============== UI / TEMA ============== */

function mudarEmpresa() {
    const empresa = document.getElementById("empresa").value;
    const bandeiras = document.getElementById("bandeiras");
    const card = document.getElementById("card");
    const botao = document.getElementById("botao");
    const titulo = document.getElementById("titulo");

    if (empresa === "infiniti") {
        bandeiras.style.display = "block";
        card.style.borderTop = "6px solid #BAFF1A";
        botao.style.backgroundColor = "#BAFF1A";
        botao.style.color = "#000";
        titulo.innerText = "Calculadora de Taxas – InfinitiPay";
    } else {
        bandeiras.style.display = "none";
        card.style.borderTop = "6px solid #8A2BE2";
        botao.style.backgroundColor = "#8A2BE2";
        botao.style.color = "#fff";
        titulo.innerText = "Calculadora de Taxas – Nubank";
    }
}

/* ============== CÁLCULO ============== */

function calcular() {
    const valor = parseFloat(document.getElementById("valor").value);
    const parcelas = parseInt(document.getElementById("parcelas").value);
    const empresa = document.getElementById("empresa").value;

    if (!valor || valor <= 0) {
        alert("Informe um valor válido.");
        return;
    }

    let taxa = 0;

    if (empresa === "nubank") {
        taxa = taxasNubank[parcelas];
    } else {
        const bandeira = document.querySelector('input[name="bandeira"]:checked').value;
        taxa = taxasInfiniti[bandeira][parcelas];
    }

    const total = valor * (1 + taxa);
    const valorParcela = total / parcelas;

    document.getElementById("total").innerText =
        total.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });

    document.getElementById("parcela").innerText =
        valorParcela.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
}

// Inicialização
mudarEmpresa();
</script>

</body>
</html>
