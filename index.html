<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de Taxas - Cartão</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
        }
        .card {
            max-width: 500px;
            margin: auto;
        }
        .resultado span {
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-body">
            <h4 class="card-title mb-4 text-center">
                Calculadora de Taxas
            </h4>

            <!-- Empresa -->
            <div class="mb-3">
                <label class="form-label">Empresa</label>
                <select id="empresa" class="form-select">
                    <option value="infiniti">InfinitiPay</option>
                    <option value="nubank">Nubank</option>
                </select>
            </div>

            <!-- Valor -->
            <div class="mb-3">
                <label class="form-label">Valor da venda (R$)</label>
                <input type="number" id="valor" class="form-control" placeholder="Ex: 1000">
            </div>

            <!-- Parcelas -->
            <div class="mb-3">
                <label class="form-label">Parcelas</label>
                <select id="parcelas" class="form-select">
                    <option value="1">1x</option>
                    <option value="2">2x</option>
                    <option value="3">3x</option>
                    <option value="4">4x</option>
                    <option value="5">5x</option>
                    <option value="6">6x</option>
                    <option value="7">7x</option>
                    <option value="8">8x</option>
                    <option value="9">9x</option>
                    <option value="10">10x</option>
                    <option value="11">11x</option>
                    <option value="12">12x</option>
                </select>
            </div>

            <!-- Taxa extra -->
            <div class="mb-3">
                <label class="form-label">Taxa adicional repassada ao cliente (%)</label>
                <input type="number" id="taxaExtra" class="form-control" value="0">
            </div>

            <button class="btn btn-primary w-100" onclick="calcular()">
                Calcular
            </button>

            <!-- Resultado -->
            <div class="resultado mt-4">
                <p>Total com juros: <span id="total">R$ 0,00</span></p>
                <p>Valor da parcela: <span id="parcela">R$ 0,00</span></p>
            </div>
        </div>
    </div>
</div>

<script>
function calcular() {
    const valor = parseFloat(document.getElementById("valor").value);
    const parcelas = parseInt(document.getElementById("parcelas").value);
    const empresa = document.getElementById("empresa").value;
    const taxaExtra = parseFloat(document.getElementById("taxaExtra").value) || 0;

    if (!valor || valor <= 0) {
        alert("Informe um valor válido.");
        return;
    }

    // TAXAS BASE (ajuste conforme sua realidade)
    const taxas = {
        infiniti: {
            1: 2.69,
            2: 4.99,
            3: 6.99,
            6: 9.99,
            12: 14.99
        },
        nubank: {
            1: 2.49,
            2: 4.79,
            3: 6.79,
            6: 9.79,
            12: 14.79
        }
    };

    // Descobre a taxa mais próxima
    let taxaOperadora = 0;
    const tabela = taxas[empresa];

    if (parcelas <= 1) taxaOperadora = tabela[1];
    else if (parcelas <= 2) taxaOperadora = tabela[2];
    else if (parcelas <= 3) taxaOperadora = tabela[3];
    else if (parcelas <= 6) taxaOperadora = tabela[6];
    else taxaOperadora = tabela[12];

    const taxaTotal = taxaOperadora + taxaExtra;

    const total = valor * (1 + taxaTotal / 100);
    const valorParcela = total / parcelas;

    document.getElementById("total").innerText =
        total.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });

    document.getElementById("parcela").innerText =
        valorParcela.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
}
</script>

</body>
</html>
